<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>批量上线</title>
    <head th:insert="~{/common/head :: header}" />
</head>
<body>
    <!--<form class="form-horizontal" role="form" method="post">-->
        <div class="modal-body">
            <div class="form-group">
                <label class="col-sm-3 control-label">标题</label>
                <div class="col-sm-9">
                    <input type="text" class="form-control" placeholder="必填" name="operationName">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">意见</label>
                <div class="col-sm-9">
                    <input type="text"  class="form-control" placeholder="必填" name="operationKey">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">选人模式</label>
                <div class="col-sm-9">
                    <div class="radio">
                        <label>
                            <input type="radio" name="userType" value="0">不选
                        </label>
                        <label>
                            <input type="radio" name="userType" value="1">单选
                        </label>
                        <label>
                            <input type="radio" name="userType" value="2">多选
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer" >
            <button type="button" class="btn btn-primary" onclick="submit('saved')">保存</button>
            <button type="button" class="btn btn-primary" onclick="submit('submit')">提交</button>
        </div>
    <!--</form>-->
</body>
<script th:inline="javascript">
    var param = {};
    /*<![CDATA[*/
    function submit(type){
        param["procDefKey"] = [[${procDefKey}]];
        param["businessKey"] = [[${businessKey}]];
        param["title"] = $("#operationName").val();
        param["opinion"] = $("#operationKey").val();
        param["userType"] = $("input[name='userType']:checked").val();
        param["type"] = type;

        showProcessing();
        $.ajax({
            type: "POST",
            url: "/flow/start",
            data: {param:JSON.stringify(param)},
            dataType: "json",
            async:true,
            success: function(data){
                alert(data);
                hideProcessing();
            }
        });
    }
    /*]]>*/
</script>
<script th:src="@{/public/js/basic.js}"></script>
</html>